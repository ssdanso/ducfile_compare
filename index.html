<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Pacifico|Ubuntu&display=swap" rel="stylesheet">
    <title>Docufix | Compare Text</title>

    <style>
  *{
    margin:0px;
    padding: 0px;
    box-sizing: border-box;
}

body{
    padding: 60px 60px 90px 30px;
    background-color: #EEF3F3;
    font-family: 'Ubuntu', sans-serif;
   
}

#file-text{
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;;
}
    #file{
        display: flex;;
        border-right: 2px solid black;
        padding: 20px 30px 20px 0px;
        align-items: center;
    }
    #text{
        display: flex;
        padding: 20px 0 20px 30px;
        align-items: center;;
    }

#text-compare{
    display: flex;
    padding: 30px 60px;
    justify-content: space-between;
}
    #text-1{
        width: 44%;
    }
        .labels{
            display: flex;
            padding: 10px 0px 10px 30px;
            width: 100%;
            background-color: #000000;
            color: white;
            margin-bottom: -7px;
            font-weight: bold;
            
        }
            .labels img{
                margin-right: 10px;
            }
    #arrow{
        align-self: center;
        
    }
    #text-2{
        width: 44%;
    }

    .input-txt{
        margin-top: -15px;
        width: 100%;
        height: 400px;
        padding: 15px 30px;
        color: black;
    }

    #button{
        display: flex;
        justify-content: center;
        text-align: center;
        margin-top: 30px;
    }

        button{
            border-radius: 20px;
            background-color: #000000;
            color: #ffffff;
            padding: 15px 30px;
            border: none;
            outline: none;
            cursor: pointer;
        }
            button:hover{
                font-weight: bold;
                background-color: #221e1e;
            }
            button img{
            width: 16.5px;
            height: 16.5px;
            vertical-align: middle;
            margin-right: 10px;
            }



@media screen and (max-width: 600px){

    body{
        padding: 60px 30px;
        text-align: center;
    }

    #main-text{
        margin-bottom: 25px;
        font-size: 24px;
    }
    #file-text{
        font-size: 18px;
    }

    #text-compare{
        flex-direction: column;
        padding: 30px 10px 10px 10px ;
    }
    #text-2, #text-1{
        width: 100%;
    }

    button{
        width: 70%;
        font-size: 15px;
    }

}

    </style>
</head>
<body>
    <h1 id="main-text">Compare two documents</h1>

    <div id="file-text">
        <div id="file">
            <img class="top-icons" src="https://res.cloudinary.com/dtbjhs8a6/image/upload/v1571193844/samples/figma%20career-list/lario/xisa8mltboqmepbzjqks.png">
            <span class="compare">File</span>
        </div>

        <div id="text">
            <img class="top-icons" src="https://res.cloudinary.com/dtbjhs8a6/image/upload/v1571193193/samples/figma%20career-list/lario/slpij76xxh4f7bpixbr5.png">
            <span class="compare">Text</span>
        </div>
        
    </div>
    
    <section id="text-compare">
        <div id="text-1">
            <label for="text" class="two-text">
                <div class="labels" >
                    <img class="white-txt" src="https://res.cloudinary.com/dtbjhs8a6/image/upload/v1571194266/samples/figma%20career-list/lario/ct8pi1qsjgonxsa7zdyn.png">
                    <span id="white-txt" class="compare">Text</span>
                </div>
            </label> <br>
            <textarea placeholder="Write your text here" class="input-txt" id="textareaBefore" cols="80" rows="10"></textarea>
        </div>
        <div id="arrow">
            <img id="compare-txt" src="https://res.cloudinary.com/dtbjhs8a6/image/upload/v1571193103/samples/figma%20career-list/lario/hyu5pvtsmqxymfx5ohwi.png">
        </div>

        <div class="add-text add-text2" id="text-2">
            <label for="text" class="two-text">
                <div class="labels">
                    <img class="white-txt" src="https://res.cloudinary.com/dtbjhs8a6/image/upload/v1571194266/samples/figma%20career-list/lario/ct8pi1qsjgonxsa7zdyn.png">
                    <span id="white-txt" class="compare">Text</span>
                </div>
            </label> <br>
            <textarea placeholder="Write your text here" class="input-txt" id="textareaAfter" cols="80" rows="10"></textarea>
        </div>
    </section>
    <div id="button">
        <button type="submit" onclick="buttonCompareClicked();">
            <img class="compare-img" src="https://res.cloudinary.com/dtbjhs8a6/image/upload/v1571193103/samples/figma%20career-list/lario/butfaguuckar9dl0i1ug.png">
            <span class="compare-btn-txt" >COMPARE</span>
        </button>
    </div>
    





    
  
    <div>
        <label>Differences:</label>
        <br />
        <div id="textareaDifferences" style="border:1px solid;height:200px"></div>
    </div>

    <button id="btn-export" onclick="exportHTML();">Export to word
        doc</button>





      
<!-- user interface ends -->
   
<script type="text/javascript">
  

    // events
      
    function buttonCompareClicked()
    {      
        var textBefore = document.getElementById("textareaBefore").value;
        var textAfter = document.getElementById("textareaAfter").value;
      
        var differences = new TextDifferencer().findDifferencesBetweenStrings
        (
            textBefore,
            textAfter
        );
      
     
        var differencesAsString = differences.toString();
      
        var textareaDifferences = document.getElementById
        (
            "textareaDifferences"
        );
        textareaDifferences.innerHTML = differencesAsString;
          
    }
      
    // extensions
      
    function ArrayExtensions()
    {
        // extension class
    }
    {
        Array.prototype.insertElementAt = function(element, index)
        {
            this.splice(index, 0, element);
        }
      
        Array.prototype.insertElementsAt = function(elements, index)
        {
            for (var i = 0; i < elements.length; i++)
            {
                this.splice(index + i, 0, elements[i]);
            }
        }
      
        Array.prototype.removeAt = function(index)
        {
            this.splice(index, 1);
        }
    }
      
    // classes
      
    function TextDifferencer()
    {
        // do nothing
    }
    {
        TextDifferencer.prototype.findDifferencesBetweenStrings = function(string0, string1)
        {
            var lengthOfShorterString = 
                (string0.length <= string1.length ? string0.length : string1.length);
     
            var numberOfExtremes = 2;   
            var passagePairsMatchingAtExtremes = [];
         
            for (var e = 0; e < numberOfExtremes; e++)
            {
                var lengthOfMatchingSubstring = 0;
         
                for (var i = 0; i < lengthOfShorterString; i++)
                {
                    var offsetForString0 = (e == 0 ? i : string0.length - i - 1); 
                    var offsetForString1 = (e == 0 ? i : string1.length - i - 1);
     
                    var charFromString0 = string0[offsetForString0];
                    var charFromString1 = string1[offsetForString1];
         
                    if (charFromString0 != charFromString1)
                    {
                        lengthOfMatchingSubstring = i;
                        break;          
                    }   
                }
         
                var matchingSubstringAtExtreme;
     
                if (e == 0)
                {
                    matchingSubstringAtExtreme = string0.substr(0, lengthOfMatchingSubstring);
                    string0 = string0.substr(lengthOfMatchingSubstring);
                    string1 = string1.substr(lengthOfMatchingSubstring);
                } else // if (e == 1)
                {
                    matchingSubstringAtExtreme = string0.substr(string0.length - lengthOfMatchingSubstring);
                    string0 = string0.substr(0, string0.length - lengthOfMatchingSubstring);
                    string1 = string1.substr(0, string1.length - lengthOfMatchingSubstring);                
                }
     
                var passagePairMatchingAtExtreme = new TextPassagePair
                (
                    true, // doPassagesMatch
                    [
                        new TextPassage(matchingSubstringAtExtreme),
                        new TextPassage(matchingSubstringAtExtreme),
                    ]
                );
     
                passagePairsMatchingAtExtremes.push
                (
                    passagePairMatchingAtExtreme
                );
            }
     
            var passagePairsAll = [];
      
            var passagePairsMatching = this.findPassagePairsMatchingBetweenStrings
            (
                string0, string1, [ 0, 0 ]
            );
      
            this.insertPassagePairsDifferentBetweenMatching
            (
                string0,
                string1,
                passagePairsMatching,
                passagePairsAll
            );
     
            for (var e = 0; e < passagePairsMatchingAtExtremes.length; e++)
            {
                var passagePairMatchingAtExtreme = passagePairsMatchingAtExtremes[e];
                passagePairsAll.insertElementAt
                (
                    passagePairMatchingAtExtreme, 
                    (e == 0 ? 0 : passagePairsAll.length)
                );
            }
              
            var returnValue = new TextDifferences(passagePairsAll);
      
            return returnValue;
        }
      
        TextDifferencer.prototype.findPassagePairsMatchingBetweenStrings = function
        (
            string0, string1, positionOffsets
        )
        {
            var passagePairsMatching = [];
      
            var longestCommonPassagePair = this.findLongestCommonPassagePair
            (
                string0, 
                string1
            );
      
            var longestCommonPassageText = longestCommonPassagePair.passages[0].text;
            var lengthOfCommonPassage = longestCommonPassageText.length;
      
            if (lengthOfCommonPassage == 0)
            {
                return passagePairsMatching;    
            }
      
            passagePairsMatching.push(longestCommonPassagePair);
      
            var passages = longestCommonPassagePair.passages;
            var passage0 = passages[0];
            var passage1 = passages[1];
      
            var passagePairsMatchingBeforeCommon = this.findPassagePairsMatchingBetweenStrings
            (
                string0.substr(0, passage0.position),
                string1.substr(0, passage1.position),
                [
                    positionOffsets[0], 
                    positionOffsets[1]
                ]
            );
      
            var passagePairsMatchingAfterCommon = this.findPassagePairsMatchingBetweenStrings
            (
                string0.substr
                (
                    passage0.position + lengthOfCommonPassage
                ),
                string1.substr
                (
                    passage1.position + lengthOfCommonPassage
                ),
                [
                    positionOffsets[0] 
                        + passage0.position 
                        + lengthOfCommonPassage,
      
                    positionOffsets[1] 
                        + passage1.position 
                        + lengthOfCommonPassage
                ]
            );
      
            var passagePairSetsMatchingBeforeAndAfter = 
            [
                passagePairsMatchingBeforeCommon,
                passagePairsMatchingAfterCommon
            ];
      
            for (var i = 0; i < passagePairSetsMatchingBeforeAndAfter.length; i++)
            {
                var passagePairsToInsert = passagePairSetsMatchingBeforeAndAfter[i];
                passagePairsMatching.insertElementsAt
                (          
                    passagePairsToInsert,
                    (i == 0 ? 0 : passagePairsMatching.length)
                );
            }
      
            for (var i = 0; i < longestCommonPassagePair.passages.length; i++)
            {
                var passage = longestCommonPassagePair.passages[i];
                passage.position += positionOffsets[i];
            }
      
            return passagePairsMatching;
        }
      
        TextDifferencer.prototype.findLongestCommonPassagePair = function(string0, string1)
        {
            var passage0 = new TextPassage("", 0);
            var passage1 = new TextPassage("", 0);
      
            var returnValue = new TextPassagePair
            (
                true, // doPassagesMatch
                [
                    passage0, passage1
                ]
            );
      
            var lengthOfString0 = string0.length;
            var lengthOfString1 = string1.length;
      
            var substringLengthsForRow = null;
            var substringLengthsForRowPrev;
      
            var lengthOfLongestCommonSubstringSoFar = 0;
            var longestCommonSubstringsSoFar = "";
            var cellIndex = 0;
      
            // Build a table whose y-axis is chars from string0,
            // and whose x-axis is chars from string1.
            // Put length of the longest substring in each cell.
      
            for (var i = 0; i < lengthOfString0; i++)
            {
                substringLengthsForRowPrev = substringLengthsForRow;
                substringLengthsForRow = [];
      
                for (var j = 0; j < lengthOfString1; j++)
                {
                    if (string0[i] != string1[j])
                    {
                        substringLengthsForRow[j] = 0;
                    }
                    else 
                    {
                        var cellValue;
      
                        if (i == 0 || j == 0)
                        {
                            // first row or column
                            cellValue = 1;
                        }
                        else
                        {
                            // Copy cell to upper left, add 1.
                            cellValue = substringLengthsForRowPrev[j - 1] + 1;
                        }
      
                        substringLengthsForRow[j] = cellValue;
      
                        if (cellValue > lengthOfLongestCommonSubstringSoFar)
                        {
                            lengthOfLongestCommonSubstringSoFar = cellValue;
                            var startIndex = i - lengthOfLongestCommonSubstringSoFar + 1;
                            var longestCommonSubstringSoFar = string0.substring // not "substr"!
                            (
                                startIndex, 
                                i + 1
                            );
      
                            passage0.text = longestCommonSubstringSoFar;
                            passage0.position = startIndex;
      
                            passage1.text = longestCommonSubstringSoFar;
                            passage1.position = j - lengthOfLongestCommonSubstringSoFar + 1;
                        }
                    }
                }
            }
      
            return returnValue;
        }
      
        TextDifferencer.prototype.insertPassagePairsDifferentBetweenMatching = function
        (
            string0,
            string1,
            passagePairsToInsertBetween,
            passagePairsAll
        )
        {   
            passagePairsToInsertBetween.insertElementAt
            (
                new TextPassagePair
                (
                    true, // doPassagesMatch
                    [
                        new TextPassage("", 0),
                        new TextPassage("", 0)
                    ]
                ),
                0
            );
      
            passagePairsToInsertBetween.push
            (
                new TextPassagePair
                (
                    true, // doPassagesMatch
                    [
                        new TextPassage("", string0.length),
                        new TextPassage("", string1.length)
                    ]
                )
            );
      
            var pMax = passagePairsToInsertBetween.length - 1;
      
            for (var p = 0; p < pMax; p++)
            {
                passagePairToInsertAfter = passagePairsToInsertBetween[p];
                passagePairToInsertBefore = passagePairsToInsertBetween[p + 1];
      
                this.buildAndInsertPassagePairBetweenExisting
                (
                    string0,
                    string1,
                    passagePairToInsertBefore,
                    passagePairToInsertAfter,
                    passagePairsAll
                );
      
                passagePairsAll.push(passagePairToInsertBefore);
            }
      
            var indexOfPassagePairFinal = passagePairsAll.length - 1;
      
            var passagePairFinal = passagePairsAll[indexOfPassagePairFinal];
      
            if 
            (
                passagePairFinal.doPassagesMatch == true 
                && passagePairFinal.passages[0].text.length == 0
            )
            {
                passagePairsAll.removeAt(indexOfPassagePairFinal, 1);
            }
        }
      
        TextDifferencer.prototype.buildAndInsertPassagePairBetweenExisting = function
        (
            string0, 
            string1, 
            passagePairToInsertBefore, 
            passagePairToInsertAfter,
            passagePairsAll
        )
        {
            var lengthOfPassageToInsertAfter = passagePairToInsertAfter.passages[0].text.length;
      
            var positionsForPassagePairDifferent = 
            [
                [
                    passagePairToInsertAfter.passages[0].position 
                        + lengthOfPassageToInsertAfter,
      
                    passagePairToInsertAfter.passages[1].position 
                        + lengthOfPassageToInsertAfter
                ],        
                [
                    passagePairToInsertBefore.passages[0].position,
                    passagePairToInsertBefore.passages[1].position
                ]          
            ];
      
            var passageToInsert0 =  new TextPassage
            (
                string0.substring // not "substr"!
                (
                    positionsForPassagePairDifferent[0][0], 
                    positionsForPassagePairDifferent[1][0]
                ),
                positionsForPassagePairDifferent[0][0]
            );
      
            var passageToInsert1 = new TextPassage
            (
                string1.substring  // not "substr"!
                (
                    positionsForPassagePairDifferent[0][1], 
                    positionsForPassagePairDifferent[1][1]
                ),
                positionsForPassagePairDifferent[0][1]
            );
      
            var passagePairToInsert = new TextPassagePair
            (
                false, // doPassagesMatch
                [
                    passageToInsert0,
                    passageToInsert1
                ]
            );
      
            if 
            (
                passagePairToInsert.passages[0].text.length > 0
                || passagePairToInsert.passages[1].text.length > 0
            )
            {
                passagePairsAll.push(passagePairToInsert);
            }
      
        } 
    }
     
    function TextDifferences(passagePairs)
    {
        this.passagePairs = passagePairs;
    }
    {
        // instance methods
      
        TextDifferences.prototype.toString = function()
        {
            var returnValue = "";
      
            for (var p = 0; p < this.passagePairs.length; p++)
            {
                var passagePair = this.passagePairs[p];
                var passagePairAsString = passagePair.toString();
      
                returnValue += passagePairAsString;
            }
      
            return returnValue ; 
        }   
     
    }
      
    function TextPassage(text, position)
    {
        this.text = text;
        this.position = position;
    }
      
    function TextPassagePair(doPassagesMatch, passages)
    {
        this.doPassagesMatch = doPassagesMatch;
        this.passages = passages;   
    }
    {
        TextPassagePair.prototype.toString = function()
        {
            var returnValue = "";
      
            if (this.doPassagesMatch == true)
            {
                returnValue = this.passages[0].text;
                returnValue = this.escapeStringForHTML(returnValue);
            }
            else
            {
                returnValue += "<mark style='background-color:red'>";
                returnValue += this.escapeStringForHTML(this.passages[0].text);
                returnValue += "</mark><mark style='background-color:yellow'>";
                returnValue += this.escapeStringForHTML(this.passages[1].text);
                returnValue += "</mark>"; 
      
            }
      
            return returnValue;
        }
     
        TextPassagePair.prototype.escapeStringForHTML = function(stringToEscape)
        {
            var returnValue = stringToEscape.replace
            (
                "&", "&amp;"
            ).replace
            (
                "<", "&lt;"
            ).replace
            (
                ">", "&gt;"
            ).replace
            (
                "\n", "<br />"
            );
     
            return returnValue;
        }
    }
      
    
      var p = doucument.getElementById('before').inner.value;
    function checkpercentage(){
    
          document.getElementById('display').innerHTML = p;
      }
    </script>





<script>
    function exportHTML(){
       var header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' "+
            "xmlns:w='urn:schemas-microsoft-com:office:word' "+
            "xmlns='http://www.w3.org/TR/REC-html40'>"+
            "<head><meta charset='utf-8'><title>Export HTML to Word Document with JavaScript</title></head><body>";
       var footer = "</body></html>";
       var sourceHTML = header+document.getElementById("textareaDifferences").innerHTML+footer;
       
       var source = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(sourceHTML);
       var fileDownload = document.createElement("a");
       document.body.appendChild(fileDownload);
       fileDownload.href = source;
       fileDownload.download = 'document.doc';
       fileDownload.click();
       document.body.removeChild(fileDownload);
    }
</script>
</body>
</html>